BEGIN;

DROP TABLE IF EXISTS Users;
DROP TABLE IF EXISTS Trucks;
DROP TABLE IF EXISTS Current_Tasks;
DROP TABLE IF EXISTS Tasks_History;

SELECT 'CREATING DATABASE STRUCTURE' as 'INFO';

CREATE TABLE Users (
	UserID VARCHAR(10) PRIMARY KEY,
  	Name VARCHAR(20) NOT NULL,
  	Surname VARCHAR(20) NOT NULL,
  	Estimated_Location VARCHAR(40) NOT NULL,
  	Avalible_For_Task BOOLEAN NOT NULL,
  	Truck_Model VARCHAR(40) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE Trucks (
	TruckID VARCHAR(10) PRIMARY KEY,
	Truck_Model CHAR(5),
	Mass VARCHAR(40) UNIQUE NOT NULL,
	Width VARCHAR(100),
	Height NUMERIC(7,2),
	Fuel_Tank INTEGER,
	Average_Fuel_Consumption INTEGER DEFAULT 2
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE Current_Tasks (
	TaskID VARCHAR(40) PRIMARY KEY,
	UserID VARCHAR(40) UNIQUE NOT NULL,
	Map_Point_Name VARCHAR(40) NOT NULL,
	Start_Date CHAR(6) NOT NULL,
	Is_Cargo_Collection_Point VARCHAR(40) NOT NULL,
	In_Progress VARCHAR(40)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE Tasks_History (
	TaskID INTEGER PRIMARY KEY,
  	UserID VARCHAR(10) NOT NULL,
  	Map_Points BIGINT UNSIGNED NOT NULL,
  	Start_Date CHAR(5),
  	End_Date VARCHAR(10) NULL,
  	Is_Cargo_Collection_Point NUMERIC(7,2),
  	In_Progress BOOLEAN default NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

COMMIT;